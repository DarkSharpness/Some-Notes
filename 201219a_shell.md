# Linux命令行以及Shell脚本

记录Linux下一些常见的命令的比较有用的用法，以及Shell脚本的编写

## 参考书籍

Linux命令行与Shell脚本编程大全 3rd Edition. Richard Blum, Christine Bresnahan, 2016

## 1 常用基本命令以及命令行参数

### 1.1 文件管理

#### 1.1.1 ls或dir

列出文件

```shell
ls

命令行参数
-R 递归显示目录下内容
-a 列出所有，包括.开头的隐藏文件
-l 详细信息，格式：mode owner group size time name
    mode：l代表链接，d代表目录，b代表块设备，c代表字符设备，p代表FIFO。rwx分别代表读写运行权限
-F 用于区分目录，在目录后加/
-h 显示文件大小时自动换算为K，M，G
--time=atime 显示访问时间而非修改时间
-i inode编号，系统中每一个文件和目录都有，且唯一
```

文件匹配

```shell
ls *.txt            显示以.txt结尾
ls date?.txt        显示date1.txt，datea.txt等
ls date[12].txt     显示date1.txt，date2.txt
ls date[1-3].txt    显示date1.txt，date2.txt，date3.txt
ls date[!1].txt     不显示date1.txt
```

#### 1.1.2 pwd

打印当前目录

#### 1.1.3 cd 

到一个目录下

../代表父目录，./代表当前目录

#### 1.1.4 touch

新建/访问一下文件

```shell
touch test.txt
```

#### 1.1.5 cp

拷贝文件

```shell
cp source.txt destination.txt
cp source.txt destination/

命令行参数
-r 递归，用于复制一个目录
-i 遇到同名文件询问是否覆盖
-v 显示当前动作
-p 保留文件时间戳，mode，用户等信息
--preserve=mode,ownership,timestamps
--preserve=all
-f 强制拷贝
```

#### 1.1.6 mv

移动/重命名文件

```shell
mv source.txt destination.txt
```

#### 1.1.7 rm和rmdir

删除/删除目录

```shell
rm 

命令行参数
-i 询问是否删除
-r 递归删除一个目录
-f 强制删除
```

#### 1.1.8 mkdir

创建目录

#### 1.1.9 ln

链接

```shell
ln file link

命令行参数
无参 硬链接，信息和源文件相同，是同一个文件，等同于引用源文件，只能用于同一个文件系统
-s 符号链接，创建的是一个符号文件，不是同一个文件
```

#### 1.1.10 file

查看文件类型

#### 1.1.11 cat

输出/连接文件，并输出到标准输出

```shell
cat 1stfile.txt
cat 1stfile.txt 2ndfile.txt

命令行参数
-n -b 显示行号
```

#### 1.1.12 less和more

文本查看器

#### 1.1.13 tail和head

查看一个文件的开头n行或结尾n行

```shell
head -n 5 log.txt
tail -n 5 log.txt
tail -5 log.txt
```

### 1.2 系统管理

#### 1.2.1 ps

显示当前进程

```shell
ps

命令行参数
UNIX
过滤
-A -e 显示所有进程
-a 列出除控制进程以及无终端进程以外所有进程
-d 列出除控制进程以外的进程
-C cmdlist 列出所有在cmd列表中的进程（命令名，如xinit）
-G -g grplist 列出所有在group列表中的进程（组名或组ID）
-U userlist 列出属主uid在userlist中的进程（用户名或用户ID）
-u userlist 显示有效用户uid在userlist中的进程
-p pidlist 显示PID在pidlist中的进程
-s sessionlist 显示会话ID在sessionlist中的进程
-t ttylist 显示终端ID在ttylist中的进程
显示格式
无参 显示默认参数（PID,TTY,TIME,CMD）
-o format 仅显示format规定输出列
-O format 显示默认输出列以及format规定输出列
-F 显示完整格式（default+UID,PPID,C,SZ,RSS,PSR,STIME）
-f 显示完整格式（default+UID,PPID,C,STIME）
-M 显示安全信息（default+LABEL）
-c 显示额外调度器信息（default+CLS,PRI）
-j 显示任务信息（default+PGID,SID）
-l 显示长列表（default+F,S,UID,PPID,C,PRI,NI,ADDR,SZ,WCHAN）
-z 显示安全标签（SELinux）
-H 层级显示
-n namelist WCHAN显示的值
-L 显示进程的线程
BSD
过滤
T 显示于当前终端有关
a 显示和任意终端有关
g 显示所有，包括控制进程
x 显示所有，包括无终端
r 仅显示运行中
U 属主用户UID
p 进程PID
t 终端tty号
显示格式
O 格式
z 安全信息SELinux
j 任务信息
l 长模式
o format 仅format
----新增格式----
s 信号格式
u 基于用户
v 基于虚拟内存
N namelist WCHAN显示的值
O order 显示顺序
S 将子进程数据加到父进程上
c 显示真实命令名称
e 显示命令的环境变量
f 分层显示
h 不显示头信息（表头）
k sort 按某列排序
n 用户ID和组ID
```

显示的各参数含义
+ **UID:**      进程属主
+ **PID:**      进程ID
+ **PPID:**     父进程ID
+ **C:**        CPU利用率
+ **STIME:**    启动时时间
+ **TTY:**      终端号
+ **TIME:**     累计CPU时间
+ **CMD:**      程序名
+ **F:**        进程系统标记
+ **S:**        进程状态（O运行，S休眠，R可运行-等待运行，Z僵尸进程-进程结束但父进程不存在，T停止）
+ **PRI:**      优先级，越小的数字代表越高的优先级
+ **NI:**       谦让度
+ **ADDR:**     内存地址
+ **SZ:**       swap所需大致空间
+ **WCHAN:**    进程休眠的内核函数地址
BSD格式
+ **VSZ:**      进程占内存大小
+ **RSS:**      未swap时占用的物理内存
+ **STAT:**     双字符状态码

#### 1.2.2 kill

#### 1.2.3 mount

#### 1.2.4 du和df

#### 1.2.5 sort

#### 1.2.6 grep

#### 1.2.7 压缩和解压缩

### 1.3 


## 2 shell脚本基础

包含了基本shell脚本编写的各方面

### 2.1 环境变量

### 2.2 重定向

### 2.3 管道

### 2.4 数学运算

### 2.5 判断

### 2.6 循环

### 2.7 迭代/遍历

### 2.8 用户输入

### 2.9 信号

### 2.10 后台运行

### 2.11 作业控制

### 2.12 调整优先级

### 2.13 设置定时运行


## 3 shell脚本进阶

shell脚本的一些高级特性

### 3.1 函数

### 3.2 sed和gawk

### 3.3 正则表达式

### 3.4 使用dialg生成伪图形界面